在持久 shell 会话中执行给定的 bash 命令，可选超时，并确保正确处理与安全控制。

所有命令默认在 ${directory} 下运行。如果你需要在其他目录执行命令，请使用 `workdir` 参数。避免使用 `cd <directory> && <command>` 这种模式，改用 `workdir`。

重要：这个工具用于 git、npm、docker 等终端操作。不要把它用于文件操作（读取、写入、编辑、搜索、查找文件），这类操作请使用对应的专用工具。

执行命令前，请遵循以下步骤：

1. 目录校验：
   - 如果命令会创建新目录或新文件，先使用 `ls` 验证父目录存在且位置正确
   - 例如在运行 `mkdir foo/bar` 之前，先运行 `ls foo` 检查 `foo` 是否存在且确实是目标父目录

2. 命令执行：
   - 对包含空格的文件路径始终使用双引号（例如：`rm "path with spaces/file.txt"`）
   - 正确引用示例：
     - `mkdir "/Users/name/My Documents"`（正确）
     - `mkdir /Users/name/My Documents`（错误，会失败）
     - `python "/path/with spaces/script.py"`（正确）
     - `python /path/with spaces/script.py`（错误，会失败）
   - 确认引用正确后再执行命令。
   - 捕获命令输出。

使用说明：
  - `command` 参数是必填项。
  - 你可以指定可选的毫秒级超时时间。若未指定，命令会在 120000ms（2 分钟）后超时。
  - 用 5-10 个词写清晰、简洁的命令描述会非常有帮助。
  - 如果输出超过 ${maxLines} 行或 ${maxBytes} 字节，输出会被截断，完整内容会写入文件。你可以用 Read 的 offset/limit 读取特定片段，或用 Grep 在完整内容中搜索。因此不需要用 `head`、`tail` 或其他截断命令来限制输出，直接运行原命令即可。

  - 除非用户明确要求，或这些命令确实是任务所必需，否则避免在 Bash 中使用 `find`、`grep`、`cat`、`head`、`tail`、`sed`、`awk`、`echo`。优先使用这些命令对应的专用工具：
    - 文件搜索：使用 Glob（不要用 find 或 ls）
    - 内容搜索：使用 Grep（不要用 grep 或 rg）
    - 读取文件：使用 Read（不要用 cat/head/tail）
    - 编辑文件：使用 Edit（不要用 sed/awk）
    - 写入文件：使用 Write（不要用 echo >/cat <<EOF）
    - 对外沟通：直接输出文本（不要用 echo/printf）
  - 当需要执行多条命令时：
    - 如果命令彼此独立且可并行，请在同一条消息中发起多个 Bash 工具调用并行执行。例如需要运行 `git status` 和 `git diff` 时，应在同一条消息中并行发两个 Bash 调用。
    - 如果命令彼此依赖且必须串行执行，请使用单个 Bash 调用并用 `&&` 串联（例如：`git add . && git commit -m "message" && git push`）。例如一个操作必须在另一个之前完成（如 mkdir 在 cp 之前、Write 在 Bash 的 git 操作之前、或 git add 在 git commit 之前），这类操作必须串行执行。
    - 仅当你需要顺序执行且不关心前序命令失败时，才使用 `;`
    - 不要用换行分隔命令（引号内可以有换行）
  - 避免使用 `cd <directory> && <command>`。要切换目录请使用 `workdir` 参数。
    <good-example>
    使用 workdir="/foo/bar"，命令：pytest tests
    </good-example>
    <bad-example>
    cd /foo/bar && pytest tests
    </bad-example>

重要说明：
- 除 git 相关 Bash 命令外，绝不要额外执行读取或探索代码的命令
- 绝不要使用 TodoWrite 或 Task 工具
- 除非用户明确要求，否则不要向远程仓库推送
- 重要：不要使用带 `-i` 的 git 命令（如 `git rebase -i` 或 `git add -i`），因为它们需要交互输入，而这里不支持。
- 如果没有可提交的变更（即没有未跟踪文件且没有已修改文件），不要创建空提交

# 创建 Pull Request
所有 GitHub 相关任务（包括 issue、pull request、checks、releases）都通过 Bash 工具使用 `gh` 命令处理。如果给的是 GitHub URL，也要用 `gh` 命令获取所需信息。

重要：当用户要求你创建 pull request 时，请严格按以下步骤执行：

1. 你可以在一次响应中调用多个工具。当请求多个互不依赖的信息且命令大概率成功时，应并行调用多个工具以获得最佳性能。请通过 Bash 工具并行运行以下命令，以了解当前分支自从与主分支分叉以来的状态：
  - 运行 `git status` 查看所有未跟踪文件
  - 运行 `git diff` 查看将被提交的 staged 和 unstaged 变更
  - 检查当前分支是否跟踪远端分支且与远端是否同步，以判断是否需要推送
  - 运行 `git log` 和 `git diff [base-branch]...HEAD` 了解当前分支完整提交历史（从分叉点开始）
2. 分析将被纳入 pull request 的全部变更，确保查看所有相关提交（不仅是最新提交，而是将进入 PR 的全部提交），并起草 PR 摘要
3. 你可以在一次响应中调用多个工具。当请求多个互不依赖的信息且命令大概率成功时，应并行调用多个工具以获得最佳性能。并行运行以下命令：
  - 如有需要，创建新分支
  - 如有需要，使用 `-u` 标志推送到远端
  - 使用下面格式执行 `gh pr create` 创建 PR。请使用 HEREDOC 传递 body 以确保格式正确。
<example>
gh pr create --title "the pr title" --body "$(cat <<'EOF'
## Summary
<1-3 bullet points>
</example>

重要：
- 不要使用 TodoWrite 或 Task 工具
- 完成后返回 PR URL，方便用户查看

# 其他常见操作
- 查看 GitHub PR 评论：`gh api repos/foo/bar/pulls/123/comments`
